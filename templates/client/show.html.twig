{% extends 'base.html.twig' %}

{% block title %}Client {{ client.name }}{% endblock %}

{% block body %}
    <main class="min-h-screen bg-slate-100 py-16">
        <section class="mx-auto w-full max-w-4xl rounded-2xl bg-white p-10 shadow-xl ring-1 ring-slate-200">
            <header class="mb-10 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
                <div>
                    <p class="text-sm uppercase tracking-[0.3em] text-slate-400">Client</p>
                    <h1 class="mt-2 text-3xl font-semibold text-slate-900">{{ client.name }}</h1>
                    <p class="mt-1 text-sm text-slate-500">Profile overview and delivery availability.</p>
                </div>
            </header>

            <div class="grid gap-10 lg:grid-cols-2">
                <article class="space-y-4">
                    <h2 class="text-lg font-semibold text-slate-900">Contact details</h2>
                    <dl class="space-y-3 text-sm text-slate-600">
                        <div class="rounded-xl bg-slate-50 px-4 py-3">
                            <dt class="text-xs uppercase tracking-[0.25em] text-slate-400">Client ID</dt>
                            <dd class="mt-1 text-lg font-semibold text-slate-900">{{ client.id }}</dd>
                        </div>
                        <div class="rounded-xl bg-slate-50 px-4 py-3">
                            <dt class="text-xs uppercase tracking-[0.25em] text-slate-400">Address</dt>
                            <dd class="mt-1 font-medium text-slate-900">{{ client.address }}</dd>
                        </div>
                        <div class="rounded-xl bg-slate-50 px-4 py-3">
                            <dt class="text-xs uppercase tracking-[0.25em] text-slate-400">City</dt>
                            <dd class="mt-1 font-medium text-slate-900">{{ client.city }}</dd>
                        </div>
                        <div class="rounded-xl bg-slate-50 px-4 py-3">
                            <dt class="text-xs uppercase tracking-[0.25em] text-slate-400">Country</dt>
                            <dd class="mt-1 font-medium text-slate-900">{{ client.country }}</dd>
                        </div>
                        <div class="rounded-xl bg-slate-50 px-4 py-3">
                            <dt class="text-xs uppercase tracking-[0.25em] text-slate-400">Full address</dt>
                            <dd class="mt-1 font-medium text-slate-900">{{ client.fullAddress }}</dd>
                        </div>
                    </dl>
                </article>

                <article class="space-y-8">
                    <div>
                        <h2 class="text-lg font-semibold text-slate-900">Delivery schedule</h2>
                        {% set weekDays = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'] %}
                        {% set scheduleValues = [] %}
                        {% for availability in client.schedule %}
                            {% set scheduleValues = scheduleValues|merge([availability.value]) %}
                        {% endfor %}

                        <ul class="mt-4 flex justify-center gap-2 text-center text-xs font-semibold">
                            {% for day in weekDays %}
                                {% set isAvailable = day in scheduleValues %}
                                <li class="w-full rounded-2xl border px-2 py-3 {{ isAvailable ? 'border-emerald-200 bg-emerald-50 text-emerald-700' : 'border-slate-200 bg-slate-50 text-slate-400' }}">
                                    <span class="block text-[11px] uppercase tracking-[0.3em] text-slate-400">{{ day|slice(0, 3)|upper }}</span>
                                    <span class="mt-1 block text-base {{ isAvailable ? 'text-emerald-700' : 'text-slate-400' }}">{{ isAvailable ? '•' : '–' }}</span>
                                </li>
                            {% endfor %}
                        </ul>
                        {% if scheduleValues is empty %}
                            <p class="mt-2 text-sm text-slate-500">No delivery availability selected yet.</p>
                        {% endif %}
                    </div>

                    <div>
                        <h2 class="text-lg font-semibold text-slate-900">Service providers</h2>
                        {% if client.serviceProviders|length %}
                            <ul class="mt-4 space-y-3">
                                {% for provider in client.serviceProviders %}
                                    <li class="rounded-xl border border-slate-200 px-4 py-3">
                                        <p class="text-base font-semibold text-slate-900">{{ provider.name }}</p>
                                        <p class="text-sm text-slate-500">{{ provider.address }}, {{ provider.city }}, {{ provider.country }}</p>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% else %}
                            <p class="mt-2 text-sm text-slate-500">No service providers linked to this client.</p>
                        {% endif %}
                    </div>
                </article>
            </div>
        </section>
    </main>
{% endblock %}


